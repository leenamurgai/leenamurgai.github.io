\section{Chapter \ref{ch_IndividualFairness}}\label{sec_app_IFSolutions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{lookbox}
\hypertarget{IF_RandPreds}{\lbtitle{Exercise: Randomised predictions}}
Write a function which takes the model score from a binary classifier and makes randomised predictions between two thresholds so that the probability of acceptance is a continuous fuction of the model score:
\begin{enumerate}[leftmargin=*]
\item Write a function which maps the model score to the probability of acceptance. The function should take a two thresholds, $t_1<t_2$. The probability of acceptance should be zero if the score is less than $t_1$, one if the score is greater than $t_2$ and increase linearly from zero to one for model scores between the two thresholds.
\item Write a function that takes a probability value $p$ and outputs the value one with probability $p$ and zero with probability $1-p$.
\item Compose the functions above to complete the exercise.
\end{enumerate}
See section 4.5 of the notebook you downloaded and worked through in the previous chapter.
\end{lookbox}

\begin{lstlisting}[caption={Randomising predictions between two thresholds}, label=lst:RandPreds]
def accept_proability(score, t1=0.45, t2=0.55):
    """Probability of acceptance"""
    # Zero below t1
    if score<=t1: return 0
    # One above t2
    if score>=t2: return 1
    # Linearly increasing from zero to one between t1 and t2
    return (score-t1)/(t2-t1)

def predict(probability):
    """Return 1 with probability probability"""
    return int(random.random()<probability)

def model_prediction(model_score, t1=0.45, t2=0.55):
    """Return random prediction given model score and thresholds"""
    return predict(accept_proability(model_score, t1,t2))
\end{lstlisting}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

